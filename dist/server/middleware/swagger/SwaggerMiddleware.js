"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const swagger_jsdoc_1 = __importDefault(require("swagger-jsdoc"));
const swagger_ui_express_1 = require("swagger-ui-express");
const path_1 = __importDefault(require("path"));
const services_1 = require("../../services");
class SwaggerMiddleware {
    static load(rootPath, app, config) {
        const swaggerOptions = {
            swaggerDefinition: {
                info: {
                    title: 'New Media Development API',
                    version: '1.0.0',
                    description: 'The Express API with autogenerated swagger doc',
                },
            },
            apis: [
                config.env === services_1.Environment.development
                    ? path_1.default.resolve(rootPath, 'api/router/index.ts')
                    : path_1.default.resolve(rootPath, 'api/router/index.js'),
            ],
        };
        const swaggerSpecs = swagger_jsdoc_1.default(swaggerOptions);
        app.get('/swagger.json', (req, res) => {
            res.setHeader('Content-Type', 'application/json');
            res.send(swaggerSpecs);
        });
        app.use('/api/docs', swagger_ui_express_1.serve, swagger_ui_express_1.setup(swaggerSpecs));
    }
}
exports.default = SwaggerMiddleware;
//# sourceMappingURL=SwaggerMiddleware.js.map